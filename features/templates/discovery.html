
{% extends 'base.html' %}
{% load static %}

{% block content %}
  <link rel="stylesheet" href='{% static "css/discovery.css" %}'>
  <title>Discovery</title>

  <header>
    <h1>Today's Top Stories:</h1>
  </header>

  <main>

    {% for blurb in blurbs %}
    <article class="news-article">
      <div class="news-container"> 
        <!-- TODO refactor to news-container from blurb-container? -->
        <div class="blurb-outlet">
          <img src="{{ blurb.outlet.logo.url }}" alt="{{ blurb.outlet.name }} logo">
          <a href="{{ blurb.outlet.page_url }}">{{ blurb.outlet.name }}</a>
          <!-- may replace with just p tag later, or ill make a view for seeing one specific outlet. leave the <a> for now -->
        </div>
        <div class="blurb-content">
          <h2>{{ blurb.title }}</h2>
          <p>{{ blurb.description }}</p>
          <a href="{{ blurb.link }}" target="_blank">Read More</a>
        </div>
      </div>
      <div class="upvotes-downvotes">
        <form action="{% url 'vote' blurb.id %}" method="POST">
          {% csrf_token %}
          <input type="hidden" name="next" value="{{ request.path }}"> <!-- for redirecting to current page's url after submit -->
          <button class="upvote-button" type='submit' name="upvote">+</button>
          <span class="vote-counter">{{ blurb.vote_count }}</span>
          <button class="downvote-button" type='submit' name="downvote">-</button>
        </form>
      </div>
    </article>
    {% endfor %}

  </main>

  <div class="blurb-modal">
    <!-- TODO: make this popup modal to view comments, etc -->
  </div>
  
{% endblock %}